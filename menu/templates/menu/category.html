{% extends "core/base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
    <div class="container-fluid my-3">
        {% if perms.menu.can_create_category %}
            <div class="d-flex justify-content-end mb-3">
                <a href="{% url 'menu:new_category' %}" class="btn btn-primary ms-2">+ New Category</a>
            </div>
        {% endif %}

        <div class="row">
            {% for category in categories %}
                <div class="col-sm-6 col-md-4 col-lg-3 mb-4">
                    <div class="card h-100">
                        <a href="{% url 'menu:menu' %}?category={{ category.id }}">
                            <img class="card-img-top img-fluid object-fit-cover" style="height: 180px;"
                                 src="{{ category.image.url }}" alt="{{ category.name }}">
                        </a>
                        <div class="card-body d-flex flex-column">
                            <div class="mt-auto">
                                <h5 class="card-title">{{ category.name }}</h5>
                                {% if perms.menu.can_edit_category %}
                                    <a href="{% url 'menu:edit_category' pk=category.id %}"
                                       class="btn btn-primary btn-sm">Edit</a>
                                {% endif %}
                                {% if perms.menu.can_delete_category %}
                                    <a href="{% url 'menu:delete_category' pk=category.id %}"
                                       class="btn btn-danger btn-sm">Delete</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

            {% endfor %}
        </div>
    </div>
{% endblock %}